"use strict";var _this=void 0;function _newArrowCheck(innerThis,boundThis){if(innerThis!==boundThis)throw new TypeError("Cannot instantiate an arrow function")}var bodyElement=document.getElementsByTagName("body")[0],pageHeight=bodyElement.clientHeight,footerHeight=+Number(.136026936*pageHeight).toFixed(2),articleElements=document.querySelectorAll("body > article"),state={prependChildInNextArticle:null,add:function(prependChildInNextArticle){_newArrowCheck(this,_this),state.prependChildInNextArticle=prependChildInNextArticle}.bind(void 0)},getChildrenShouldAppend=function(page){var _this2=this;return _newArrowCheck(this,_this),Array.prototype.slice.call(page.children).filter(function(child){return _newArrowCheck(this,_this2),child.getBoundingClientRect().bottom>page.getBoundingClientRect().bottom-footerHeight}.bind(this)).reverse()}.bind(void 0),insertNewArticle=function(child,currentArticle){if(_newArrowCheck(this,_this),"article"===currentArticle.nextElementSibling.tagName.toLowerCase())return state.prependChildInNextArticle(child,currentArticle.nextElementSibling,currentArticle);var newArticle=document.createElement("article");return currentArticle.after(newArticle),state.prependChildInNextArticle(child,newArticle,currentArticle)}.bind(void 0),prependChildInNextArticle=function(child,nextArticle,currentArticle){return _newArrowCheck(this,_this),nextArticle?nextArticle.insertBefore(child,nextArticle.firstChild):insertNewArticle(child,currentArticle)}.bind(void 0),fixPageContents=function(pages){var _this3=this;_newArrowCheck(this,_this),Array.prototype.slice.call(pages).map(function(page,pageIdx,currentArr){var _this4=this;_newArrowCheck(this,_this3),getChildrenShouldAppend(page).forEach(function(child){_newArrowCheck(this,_this4),prependChildInNextArticle(child,currentArr[pageIdx+1],page)}.bind(this))}.bind(this))}.bind(void 0),init=function(){_newArrowCheck(this,_this),state.prependChildInNextArticle||state.add(prependChildInNextArticle),fixPageContents(articleElements)}.bind(void 0);bodyElement.onload=init;