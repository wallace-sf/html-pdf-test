function init() {
  let bag = {
    proposta: {
      id: "2613bb90-c9f5-11eb-9c13-05fe748973cf",
      data: {
        prazo: "36",
        status: "pre_aprovada",
        parcelas: 4,
        orcamento: {
          uf: "RJ",
          valor: {
            total: {
              l1: 906008,
              l2: 647802,
              l3: 498536,
              l4: 386583,
              s1: 585717,
              s2: 420970,
              s3: 325110,
              s4: 253211,
              m24: 49010,
              m36: 41170,
              m48: 35264,
              m60: 31059,
            },
            servico: {
              l1: 34799,
              l2: 30799,
              l3: 26799,
              l4: 23799,
              s1: 34799,
              s2: 30799,
              s3: 26799,
              s4: 23799,
              m24: 34799,
              m36: 30799,
              m48: 26799,
              m60: 23799,
            },
            gerado_em: "2021-06-10T14:06:12.241Z",
            instalacao: 72863,
            equipamentos: {
              l1: 871209,
              l2: 617003,
              l3: 471737,
              l4: 362784,
              s1: 550918,
              s2: 390171,
              s3: 298311,
              s4: 229412,
              m24: 14211,
              m36: 10371,
              m48: 8465,
              m60: 7260,
            },
          },
          cidade: "RIO DE JANEIRO",
          postos: {
            cftv: {
              combo: [],
              valorPosto: {
                m24: 0,
                m36: 0,
                m48: 0,
                m60: 0,
                l1l1: 0,
                l1l2: 0,
                l1l3: 0,
                l1l4: 0,
                l2l1: 0,
                l2l2: 0,
                l2l3: 0,
                l2l4: 0,
                l3l1: 0,
                l3l2: 0,
                l3l3: 0,
                l3l4: 0,
                l4l1: 0,
                l4l2: 0,
                l4l3: 0,
                l4l4: 0,
                s1s1: 0,
                s1s2: 0,
                s1s3: 0,
                s1s4: 0,
                s2s1: 0,
                s2s2: 0,
                s2s3: 0,
                s2s4: 0,
                s3s1: 0,
                s3s2: 0,
                s3s3: 0,
                s3s4: 0,
                s4s1: 0,
                s4s2: 0,
                s4s3: 0,
                s4s4: 0,
              },
              equipamento: [],
              valorInstalacao: 0,
            },
            alarme: {
              combo: [],
              valorPosto: {
                m24: 49010,
                m36: 41170,
                m48: 35264,
                m60: 31059,
                l1l1: 906008,
                l1l2: 902008,
                l1l3: 898008,
                l1l4: 895008,
                l2l1: 651802,
                l2l2: 647802,
                l2l3: 643802,
                l2l4: 640802,
                l3l1: 506536,
                l3l2: 502536,
                l3l3: 498536,
                l3l4: 495536,
                l4l1: 397583,
                l4l2: 393583,
                l4l3: 389583,
                l4l4: 386583,
                s1s1: 585717,
                s1s2: 581717,
                s1s3: 577717,
                s1s4: 574717,
                s2s1: 424970,
                s2s2: 420970,
                s2s3: 416970,
                s2s4: 413970,
                s3s1: 333110,
                s3s2: 329110,
                s3s3: 325110,
                s3s4: 322110,
                s4s1: 264211,
                s4s2: 260211,
                s4s3: 256211,
                s4s4: 253211,
              },
              equipamento: [
                {
                  codProduto: "010202",
                  quantidade: 1,
                  codTipoInstalacao: "N",
                },
                {
                  codProduto: "044245",
                  quantidade: 13,
                  codTipoInstalacao: "N",
                },
              ],
              valorInstalacao: 72863,
            },
          },
          status: "em_analise",
          servico: ["monitoramento"],
          comissao: {
            venda_gestor: {
              l1: 87121,
              l2: 47304,
              l3: 23587,
              l4: 6046,
              s1: 55092,
              s2: 29913,
              s3: 14916,
              s4: 3824,
              m24: 0,
              m36: 0,
              m48: 0,
              m60: 0,
            },
            servico_gestor: {
              l1: 26099,
              l2: 23099,
              l3: 20099,
              l4: 17849,
              s1: 26099,
              s2: 23099,
              s3: 20099,
              s4: 17849,
              m24: 26099,
              m36: 23099,
              m48: 20099,
              m60: 17849,
            },
            venda_representante: {
              l1: 261363,
              l2: 141911,
              l3: 70761,
              l4: 18139,
              s1: 165275,
              s2: 89739,
              s3: 44747,
              s4: 11471,
              m24: 0,
              m36: 0,
              m48: 0,
              m60: 0,
            },
            servico_representante: {
              l1: 78298,
              l2: 69298,
              l3: 60298,
              l4: 53548,
              s1: 78298,
              s2: 69298,
              s3: 60298,
              s4: 53548,
              m24: 78298,
              m36: 69298,
              m48: 60298,
              m60: 53548,
            },
          },
          has_prime: true,
          tabela_id: "0169bf10-c9f5-11eb-9c13-05fe748973cf",
          tipo_local: "residencial",
          comentarios: "Sem comentÃ¡rios",
          tipo_tabela: "l",
          infraestrutura: 120000,
          lista_materiais: [
            {
              qtd: 1,
              tipo: "equipamento",
              codigo: "010202",
              produto: "CENTRAL SP 5500",
              is_prime: true,
              categoria: "alarme",
              is_servico: true,
              valor_unidade_l1: 179739,
              valor_unidade_l2: 127293,
              valor_unidade_l3: 97324,
              valor_unidade_l4: 74847,
              valor_unidade_s1: 122971,
              valor_unidade_s2: 87089,
              valor_unidade_s3: 66586,
              valor_unidade_s4: 51208,
              valor_unidade_m24: 3343,
              valor_unidade_m36: 2441,
              valor_unidade_m48: 1991,
              valor_unidade_m60: 1709,
            },
            {
              qtd: 13,
              tipo: "equipamento",
              codigo: "044245",
              produto: "SENSOR IVP 3000 MW",
              is_prime: true,
              categoria: "alarme",
              is_servico: true,
              valor_unidade_l1: 53190,
              valor_unidade_l2: 37670,
              valor_unidade_l3: 28801,
              valor_unidade_l4: 22149,
              valor_unidade_s1: 32919,
              valor_unidade_s2: 23314,
              valor_unidade_s3: 17825,
              valor_unidade_s4: 13708,
              valor_unidade_m24: 836,
              valor_unidade_m36: 610,
              valor_unidade_m48: 498,
              valor_unidade_m60: 427,
            },
          ],
          mapa_instalacao: [
            {
              name: "portao",
              produtos: [
                {
                  qtd: 1,
                  codigo: "010202",
                  cod_tipo_instalacao: "N",
                },
                {
                  qtd: 13,
                  codigo: "044245",
                  cod_tipo_instalacao: "N",
                },
              ],
            },
          ],
          oportunidade_ref: {
            id: "c0d09370-c9f4-11eb-9f4e-8dce2abd08d9",
            collection_id: "de8bf1f0-2f73-11eb-ba42-01e2029c0a36",
          },
        },
        valor_pgo: 3990,
        incluir_pgo: true,
        opcao_preco: "l1l2",
        opcao_servico: "l2",
        oportunidade_id: "c0d09370-c9f4-11eb-9f4e-8dce2abd08d9",
        pgto_infra_gups: true,
        bonificacao_prazo: 1,
        opcao_equipamento: "l1",
        pgto_instalacao_gups: true,
      },
      nano_id: "G2UTCQ",
      actor_id: "bdcf1c90-b717-11eb-bbbd-3b52d51cefb6",
      schema_id: "763b8c71-bf13-11eb-8248-1faffafc18ed",
      created_at: "2021-06-10T14:07:10.793Z",
      updated_at: null,
      collection_id: "df1a0120-2f73-11eb-ba42-01e2029c0a36",
    },
  };

  const getTableRows = (bag) => {
    const eqpts = bag.proposta.data.orcamento.lista_materiais.length;
    const tabela = bag.proposta.data.opcao_equipamento;
    const idx = "valor_unidade_" + tabela;
    const rows = [];

    // Intl.NumberFormat("pt-br", { style: "currency", currency: "BRL" }).format(unit / 100);

    for (let i = 0; i < eqpts; i++) {
      const unit = bag.proposta.data.orcamento.lista_materiais[i][idx];
      const qtd = bag.proposta.data.orcamento.lista_materiais[i].qtd;
      const codigo = bag.proposta.data.orcamento.lista_materiais[i].codigo;
      const produto = bag.proposta.data.orcamento.lista_materiais[i].produto;
      rows.push({
        codigo,
        produto,
        qtd,
        unit: `R$ ${unit / 100}`,
        total: `R$ ${(unit * qtd) / 100}`,
      });
    }

    return rows;
  };

  const lista_equipamentos = getTableRows(bag);

  const template = document.getElementById("template").innerHTML;
  const root = document.getElementById("root");

  const mustacheRender = Mustache.render(template, {
    razao_social: "Fieldlink",
    lista_equipamentos,
  });

  root.innerHTML = mustacheRender;
}

init();
